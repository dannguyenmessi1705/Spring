# Sử dụng Session trong Spring MVC
## 1. Giới thiệu
Trong bài viết này, chúng ta sẽ tìm hiểu cách sử dụng `Session` trong ứng dụng Spring MVC.

`Session` là một cơ chế lưu trữ dữ liệu trên server. Mỗi `Session` sẽ được tạo ra khi một người dùng truy cập vào ứng dụng và sẽ bị hủy khi người dùng thoát khỏi ứng dụng.

## 2. So sánh `Session` và `Request`
`Session` và `Request` đều là các cơ chế lưu trữ dữ liệu trong ứng dụng Spring MVC.

>Request
- `Request` là một cơ chế lưu trữ dữ liệu trên server trong quá trình xử lý request. Dữ liệu trong `Request` chỉ tồn tại trong quá trình xử lý request và sẽ bị hủy sau khi response được trả về.
- Dữ liệu `Request` không thể sử dụng cho các request khác.
- Được khuyến khích sử dụng `Request` cho hầu hết các trường hợp.

>Session
- `Session` là một cơ chế lưu trữ dữ liệu trên server. Dữ liệu trong `Session` sẽ tồn tại trong suốt quá trình sử dụng ứng dụng và sẽ bị hủy khi người dùng thoát khỏi ứng dụng.
- Dữ liệu `Session` có thể sử dụng cho toàn bộ ứng dụng, mọi request đều có thể truy cập vào dữ liệu `Session`.
- Được khuyến khích sử dụng `Session` cho các trường hợp cần lưu trữ dữ liệu trong suốt quá trình sử dụng ứng dụng.
- Cẩn thận trong việc lưu trữ dữ liệu vào `Session` vì dữ liệu trong `Session` sẽ tồn tại trong suốt quá trình sử dụng ứng dụng, có thể gây ra tràn bộ nhớ.

## 3. Sử dụng `Session` trong Spring MVC
Để sử dụng `Session` trong Spring MVC, chúng ta sử dụng annotation `@SessionAttributes` để đánh dấu class muốn lưu trữ dữ liệu vào `Session`.

Truyền vào `@SessionAttributes` là tên của attribute cần lưu trữ trong `Session`.

Ví dụ:
>`HelloController.java`
```java
package com.example.demo;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.SessionAttributes;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.ui.ModelMap;

@Controller
@SessionAttributes("name") // Lưu trữ attribute name vào Session
public class HelloController {
    @GetMapping("/hello")
    public String hello(@RequestParam String name, ModelMap model) {
        model.addAttribute("name", name); // Truyền dữ liệu name vào attribute name, dữ liệu này sẽ được lưu vào Session
        return "hello";
    }

    @GetMapping("/show")
    public String show() {
        return "show";
    }
}
```
>`show.jsp`
```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<h1> 
    Welcome ${name}! <!-- Hiển thị dữ liệu name từ Session mặc dù Controller không truyền dữ liệu name vào View, vì đã lưu vào Session, nếu không có hàm hello(), đi vào route http://localhost:8080/hello?name=... thì sẽ không có Session -->
</h1>
</html>
```