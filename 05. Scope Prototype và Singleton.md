# Scope Prototype và Singleton trong Spring
## 1. Giới thiệu
Trong Spring Framework, chúng ta có thể sử dụng Scope Prototype và Singleton để quản lý vòng đời của các Bean.

- **Singleton**: Khi chúng ta sử dụng Singleton, Spring Framework sẽ tạo ra một Bean duy nhất cho mỗi ApplicationContext.
- **Prototype**: Khi chúng ta sử dụng Prototype, Spring Framework sẽ tạo ra một Bean mới mỗi khi chúng ta cần sử dụng.

Mặc định, Spring Framework sử dụng **Singleton**.

## 2. Sử dụng Scope Prototype và Singleton
Để sử dụng Scope Prototype và Singleton, chúng ta có thể sử dụng Annotation `@Scope` và có thể đặt ở những nơi sau:
- Ngay sau Annotation `@Component`, `@Service`, `@Repository`, `@Controller`.
- Ngay sau Annotation `@Bean`.
- Ngay sau Annotation `@Configuration` (Các Bean trong Configuration class sẽ được tạo ra theo cách Prototype hoặc Singleton).

Ví dụ:
```java
package com.example.demo;

import org.springframework.context.annotation.Bean;
import org.springframework.context.stereotype.Component;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Scope;
import org.springframework.beans.factory.config.ConfigurableBeanFactory;

@Component
class NormalClass {}

@Component
@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE) // Đánh dấu Bean sẽ được tạo ra theo Prototype, mỗi lần lấy Bean sẽ tạo ra một Bean mới
class PrototypeClass {}

@Configuration
@ComponentScan
class Main {
    public static void main(String[] args) {
        try (var context = new AnnotationConfigApplicationContext(Main.class)) {
            // Mặc định sẽ là Singleton, in ra cùng một địa chỉ vùng nhớ
            System.out.println(context.getBean(NormalClass.class)); // #0
            System.out.println(context.getBean(NormalClass.class)); // #0
            System.out.println(context.getBean(NormalClass.class)); // #0

            // Prototype, in ra các địa chỉ vùng nhớ khác nhau
            System.out.println(context.getBean(PrototypeClass.class)); // #1
            System.out.println(context.getBean(PrototypeClass.class)); // #2
            System.out.println(context.getBean(PrototypeClass.class)); // #3
        }
    }
}
```

## 3. Lợi ích khi sử dụng Scope trong Spring
- **Singleton**: Khi chúng ta sử dụng Singleton, chúng ta có thể tạo ra một Bean duy nhất cho mỗi IoC Container, giúp tiết kiệm tài nguyên hệ thống.
- **Prototype**: Khi chúng ta sử dụng Prototype, chúng ta có thể tạo ra một Bean mới mỗi khi cần sử dụng, giúp tránh được việc sử dụng Bean cũ.
- **Scope** chỉ dành cho phát triển Web
    + **Request**: Bean sẽ được tạo ra mỗi khi có một HTTP Request.
    + **Session**: Bean sẽ được tạo ra mỗi khi có một HTTP Session.
    + **Application**: Bean sẽ được tạo ra mỗi khi ứng dụng được khởi tạo.
    + **WebSocket**: Bean sẽ được tạo ra mỗi khi có một WebSocket.
    